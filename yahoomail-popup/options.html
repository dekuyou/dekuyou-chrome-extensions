<html lang=ja>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Y!Mail pop-up option</title>

<script>

var background = chrome.extension.getBackgroundPage();
window.onload = function(){
	restore_options();
	document.getElementById("ver").innerHTML = background.chrome.extension.getVersion();
	
}



function save_interval() {
	var interval = document.getElementById("interval").value;
	if( interval.match( /[^0-9]+/ ) ) {
		viewStatus("status_interval", "enter a number.");
		return;
	}
	
    //
    localStorage["interval"] = interval;
	
	viewStatus("status_interval","Options Saved.");
	
	background.stop();
	
}

function save_badge_options(){

    localStorage["nounread"] = document.getElementById("t1").value;
    localStorage["unread"] = document.getElementById("t2").value;
//    localStorage["newmsg"] = document.getElementById("t3").value;
	viewStatus("status_badge","Options Saved.");

	
}

function save_hide_options(){

    localStorage["0badge"] = document.getElementById("h1").checked;
    localStorage["checkingbadge"] = document.getElementById("h2").checked;
	viewStatus("status_hide","Options Saved.");

	
}


function save_nomailicongrey_options(){

    localStorage["nomailicongrey"] = document.getElementById("g1").checked;
	viewStatus("status_nomailicon","Options Saved.");

	
}

function save_sound_options(){

    localStorage["usesound"] = document.getElementById("s1").checked;
	viewStatus("status_sound","Options Saved.");

	
}



function height_options(){

    localStorage["height"] = document.getElementById("height1").checked;
	viewStatus("status_height","Options Saved.");

	
}

function domain_Initialization(){
    //
	localStorage.removeItem("domain");
//	localStorage.removeItem("subdomain");
	viewStatus("status_domain"," Initialized.");

	restore_options();

}

function viewStatus(str1,str2){
    //
    var status = document.getElementById(str1);
    status.innerHTML = str2;
    setTimeout(function() { status.innerHTML = ""; }, 1 * 1000);


}

function restore_options() {
    //
    document.getElementById("interval").value = ( localStorage["interval"] || "" );
    document.getElementById("t1").value = ( localStorage["nounread"] || "" );
    document.getElementById("t2").value = ( localStorage["unread"] || "" );
//    document.getElementById("t3").value = ( localStorage["newmsg"] || "" );

	if(( localStorage["0badge"] || "" )+"" == "true"){
		document.getElementById("h1").checked = true;
	}
	if(( localStorage["checkingbadge"] || "" )+"" == "true"){
		document.getElementById("h2").checked = true;
	}
	if(( localStorage["height"] || "" )+"" == "true"){
		document.getElementById("height1").checked = true;
	}	
//	if(( localStorage["nomailicongrey"] || "" )+"" == "true"){
//		document.getElementById("g1").checked = true;
//	}

//	if(( localStorage["usesound"] || "" )+"" == "true"){
//		document.getElementById("s1").checked = true;
//	}
    document.getElementById("domain").innerHTML = ( localStorage["domain"] || "" );
	

}




</script>

<body >
<h1><img src=./favicon.ico>&nbsp;&nbsp;&nbsp;Ｙ！メールポップアップ</h1>
version <span id=ver></span>
<hr>

<br>

チェック間隔 :<input id="interval" type="Number" name="interval" size='5' required>s</input>
<button onclick="save_interval()">チェック間隔を変更.</button> 0 を設定した場合はチェックしません.
<div id="status_interval"></div>

<br>

未読メッセージ０件の時のバッヂカラー :<input type="text" name="c1" size="6" id="t1" value="" class="html5jp-cpick [coloring:true]" readonly />&nbsp;

未読メッセージ件数表示バッヂカラー :<input type="text" name="c2" size="6" id="t2" class="html5jp-cpick [coloring:true]" readonly />&nbsp;

<!--
new msg badge color :<input type="text" name="c3" size="6" id="t3" class="html5jp-cpick [coloring:true]" readonly />&nbsp;
-->

<button onclick="save_badge_options()">バッヂの色を変更.</button>
<div id="status_badge"></div>
<br>

未読０件の時はバッヂを非表示: <input type="checkbox" name=i1 id=h1 value='' >&nbsp;
チェック実行時バッヂを非表示: <input type="checkbox" name=i2 id=h2 value=''>&nbsp;
<button onclick="save_hide_options()">バッヂ非表示設定を変更.</button>
<div id="status_hide"></div>


<!--
no mail icon is grey: <input type="checkbox" name=f1 id=g1 value=''>&nbsp;
<button onclick="save_nomailicongrey_options()">Change no mail icon.</button>
<div id="status_nomailicon" ></div>
-->
<br>

ポップアップの高さを低く表示: <input type="checkbox" name=hi1 id=height1 value=''>&nbsp;
<button onclick="height_options()">高さ設定変更.</button>
<div id="status_height" ></div>


<br>



Your Domain :<span id="domain"></span><button onclick="domain_Initialization()">初期化.</button>
<div id="status_domain"></div>
※ポップアップの表示に異常が発生したら初期化してください。あなたの利用ドメインが変更されている可能性があります。

<br>

<hr>

<iframe src="http://dekuyou.ddo.jp/myPage.html" width=100% height=80 scrolling="no" frameborder="0">
</iframe>

<!-- Thank you! @kyu3 -->
</body>

<script type="text/javascript" src="./cpick.js"></script>
</html>